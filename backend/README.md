# Stylus MultiSig Example

    Finished `release` profile [optimized] target(s) in 6m 08s
contract size: 21.4 KB
wasm size: 81.0 KB    
File used for deployment hash: ./Cargo.lock
File used for deployment hash: ./Cargo.toml
File used for deployment hash: ./rust-toolchain.toml
File used for deployment hash: ./src/lib.rs 
File used for deployment hash: ./src/main.rs
project metadata hash computed on deployment: "fd68e910d4b509fd993b8a471db746bd5225e65f97507d94ffb46d8384ec298d"
contract size: 21.4 KB
wasm data fee: Îž0.000113

stripped custom section from user wasm to remove any sensitive data
contract size: 21.3 KB
wasm size: 80.9 KB
File used for deployment hash: ./Cargo.lock
File used for deployment hash: ./Cargo.toml
File used for deployment hash: ./rust-toolchain.toml
File used for deployment hash: ./src/lib.rs
File used for deployment hash: ./src/main.rs
project metadata hash computed on deployment: "fd68e910d4b509fd993b8a471db746bd5225e65f97507d94ffb46d8384ec298d"
stripped custom section from user wasm to remove any sensitive data
contract size: 21.3 KB
wasm data fee: 0.000113 ETH
deployed code at address: 0x1c9a2f33475accf2f56c2f7132554ea0b48fa6cc
deployment tx hash: 0x1fde33a1f40cbf1dc036a1235a36012cf52988dee339853c6298953d6d02989e
contract activated and ready onchain with tx hash: 0x763081e88d464553fd2da009173389eec206d5a709cab4e409ec77bcaadba97d

NOTE: We recommend running cargo stylus cache bid 1c9a2f33475accf2f56c2f7132554ea0b48fa6cc 0 to cache your activated contract in ArbOS.
Cached contracts benefit from cheaper calls. To read more about the Stylus contract cache, see
https://docs.arbitrum.io/stylus/concepts/stylus-cache-manager

```bash
cargo stylus deploy \
  --endpoint='https://sepolia-rollup.arbitrum.io/rpc' \
  --private-key="YOUR_PRIVATE_KEY"
  ```


```bash
/**
 * This file was automatically generated by Stylus and represents a Rust program.
 * For more information, please see [The Stylus SDK](https://github.com/OffchainLabs/stylus-sdk-rs).   
 */

// SPDX-License-Identifier: MIT-OR-APACHE-2.0
pragma solidity ^0.8.23;

interface IMultiSig {
    function numConfirmationsRequired() external view returns (uint256);

    function deposit() external payable;

    function submitTransaction(address to, uint256 value, bytes calldata data) external;

    function initialize(address[] memory owners, uint256 num_confirmations_required) external;

    function executeTransaction(uint256 tx_index) external;

    function confirmTransaction(uint256 tx_index) external;

    function revokeConfirmation(uint256 tx_index) external;

    function isOwner(address check_address) external view returns (bool);

    function getTransactionCount() external view returns (uint256);

    error AlreadyInitialized();

    error ZeroOwners();

    error InvaildConfirmationNumber();

    error InvalidOwner();

    error OwnerNotUnique();

    error NotOwner();

    error TxDoesNotExist();

    error TxAlreadyExecuted();

    error TxAlreadyConfirmed();

    error TxNotConfirmed();

    error ConfirmationNumberNotEnough();

    error ExecuteFailed();
}
```


Project starter template for writing Arbitrum Stylus programs in Rust using the [stylus-sdk](https://github.com/OffchainLabs/stylus-sdk-rs). It includes a Rust implementation of a basic multi sig smart contract:

```js
// SPDX-License-Identifier: MIT-OR-APACHE-2.0
pragma solidity ^0.8.23;

interface IMultiSig {
    function numConfirmationsRequired() external view returns (uint256);

    function deposit() external payable;

    function submitTransaction(address to, uint256 value, bytes calldata data) external;

    function initialize(address[] memory owners, uint256 num_confirmations_required) external;

    function executeTransaction(uint256 tx_index) external;

    function confirmTransaction(uint256 tx_index) external;

    function revokeConfirmation(uint256 tx_index) external;

    function isOwner(address check_address) external view returns (bool);

    function getTransactionCount() external view returns (uint256);

    error AlreadyInitialized();

    error ZeroOwners();

    error InvaildConfirmationNumber();

    error InvalidOwner();

    error OwnerNotUnique();

    error NotOwner();

    error TxDoesNotExist();

    error TxAlreadyExecuted();

    error TxAlreadyConfirmed();

    error TxNotConfirmed();

    error ConfirmationNumberNotEnough();

    error ExecuteFailed();
}
```

### ABI Export

You can export the Solidity ABI for your program by using the `cargo stylus` tool as follows:

```bash
cargo stylus export-abi
```

which outputs:

```js
/**
 * This file was automatically generated by Stylus and represents a Rust program.
 * For more information, please see [The Stylus SDK](https://github.com/OffchainLabs/stylus-sdk-rs).
 */

// SPDX-License-Identifier: MIT-OR-APACHE-2.0
pragma solidity ^0.8.23;

interface IMultiSig {
    function numConfirmationsRequired() external view returns (uint256);

    function deposit() external payable;

    function submitTransaction(address to, uint256 value, bytes calldata data) external;

    function initialize(address[] memory owners, uint256 num_confirmations_required) external;

    function executeTransaction(uint256 tx_index) external;

    function confirmTransaction(uint256 tx_index) external;

    function revokeConfirmation(uint256 tx_index) external;

    function isOwner(address check_address) external view returns (bool);

    function getTransactionCount() external view returns (uint256);

    error AlreadyInitialized();

    error ZeroOwners();

    error InvaildConfirmationNumber();

    error InvalidOwner();

    error OwnerNotUnique();

    error NotOwner();

    error TxDoesNotExist();

    error TxAlreadyExecuted();

    error TxAlreadyConfirmed();

    error TxNotConfirmed();

    error ConfirmationNumberNotEnough();

    error ExecuteFailed();
}
```

## Deploying

You can use the `cargo stylus` command to also deploy your program to the Stylus testnet. We can use the tool to first check
our program compiles to valid WASM for Stylus and will succeed a deployment onchain without transacting. By default, this will use the Stylus testnet public RPC endpoint. See here for [Stylus testnet information](https://docs.arbitrum.io/stylus/reference/testnet-information).

```bash
cargo stylus check
```

Next, we deploy:

```bash
cargo stylus deploy \
  --private-key-path=<PRIVKEY_FILE_PATH>
```
